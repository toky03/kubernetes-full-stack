\subsection{Database}
In the further sections we will use a plain mysql docker container as a database. In order to use the Application completely locally, a local mySQL database has to be installed and a schema for the random generator application needs to be provided for a specific randgenuser.
If there is not yet a local mySQL database installed it can be done with the following command:
\begin{lstlisting}[language=Bash]
sudo apt-get update
sudo apt-get install mysql-server
\end{lstlisting}
After the installation log in to MySQL as root. 
\begin{lstlisting}[language=Bash]
sudo mysql
\end{lstlisting}
Now the Database and the user can be created and permissions to the respective schema will be given.
\begin{lstlisting}[language=SQL]
CREATE database db_example;
CREATE USER 'springuser'@'localhost' IDENTIFIED BY ThePassword;
GRANT ALL PRIVILEGES ON *.db_example TO 'springuser'@'localhost';
\end{lstlisting}
With this, the Database is ready to used by the Random Generator Example from localhost.

\subsection{Random Generator}
\input{sections/random_generator.tex}


\subsection{Middle Tier}

\input{sections/middletier.tex}


\subsection{Statistic Service}
\input{sections/statistictier.tex}

\subsection{Frontend}
\input{sections/frontend.tex}

\subsection{Creating the Docker Images}
As we were always using multi stage builds we are now able to build the Project directly with Docker without any manual execution of some maven build commands or angular build commands.
It is mostly important for the build from our Frontend, as we do not need to run ng build and after that mvn clean package.
With this we can also always be sure to have the latest version of the jar file, as we are building the jar together with the Docker Image.

\textbf{Create Random Generator}
within the root directory of the Random Generator.
\begin{lstlisting}[language=Bash]
docker build -t rand-gen-image
\end{lstlisting}

\begin{lstlisting}[language=Bash]
docker build -t rand-gen-image
\end{lstlisting}


\subsection{running with Docker}

\textbf{Create a Network}
\begin{lstlisting}[language=Bash]
docker network create  -d bridge rand-gen-network
\end{lstlisting}

\textbf{Start the Database Container}

\begin{lstlisting}[language=Bash]
docker run -d --name rand-gen-database \
-e MYSQL_ROOT_PASSWORD='password' \
-e MYSQL_USER='random_user' \
-e MYSQL_PASSWORD='random_password' \
-e MYSQL_DATABASE='rand_numbers' \
--network rand-gen-network \
mysql:5.6
\end{lstlisting}

\textbf{Start the Random Generator App}
\begin{lstlisting}[language=Bash]
docker run -d --name=rand-gen-app \
--network rand-gen-network \
rand-gen-image
\end{lstlisting}

\textbf{Start the middle tier Application}
\begin{lstlisting}[language=Bash]
docker run -d \
--name middle-tier \
--network rand-gen-network \
middle-tier
\end{lstlisting}

\textbf{Starting the Stat Tier Application}
\begin{lstlisting}[language=Bash]
docker run -d \
--name stat-tier \
--network rand-gen-network \ 
stat-tier-image
\end{lstlisting}

\textbf{Start the Frontend Service}
\begin{lstlisting}[language=Bash]
docker run -d -p 8080:8080 \
--network rand-gen-network \
--name rand-frontend \
rand-frontend
\end{lstlisting}